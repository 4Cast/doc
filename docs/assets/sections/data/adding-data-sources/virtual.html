<h1>Virtual Model</h1>
<div class="bs-callout bs-callout-info">
Unlike the other connectors, virtual models allow to map any web services in a Wakakanda Model.
Even if there is no automatic "plug and consume your remote data" magic there, Wakanda do provide a full toolkit of 
comprehensible JavaScript methods (called <code>controlMethods</code> ) to map the communication between Wakanda and your remote service.
Once both models and mapping have been coded you can then take advantage of the functional richness of Wakanda Model and its data manipulation API in pure JavaScript
</div>

<br>
Like any other kind of Model, you can add or overwrite some properties and attributes of the proxy model, thus applying custom business rules to the datastore. 
For example, you can add permissions, calculated attributes, or datastore events to the model (see the <a [routerLink]="['/guide']" [queryParams]="{section: 'main-data-external-enrich'}"> Customizing the Wakanda proxy model section </a>)

<br>
<br>
<h2> Requirements</h2>
<br>
<div class="bs-callout bs-callout-info">

To set up a Virtual Model you just need to use <code>Wakanda Enterpise</code> from version <strong>2.0</strong>
</div>
<br>
<br>

<h2> Dialog and Scaffolding</h2>
<br>
To create a custom virtual Model the only property that needs to be filled is the <code> Datastore name</code>.

<br>
<img src="./assets/images/virtualdialog.png" alt="Virtual Dialog" class="img-responsive">
<br>
<br>

When clicking <code>OK</code>, in addition to the <code>Model</code> and <code>model.js</code> files, a new <code>controller.js</code> JavaScript file is also created.<br>
This the the place where you have to code your <code> controlMethods</code>
<br>
<br>
<h2>How to use</h2>

<br>
<h3> Create your Model</h3>
<br>
First you need to define a model in the <code> model.js</code> file.
<br>
<snippets path="./assets/snippets/data/external-data/" files="['model.js']"></snippets>
<br>
<div class="bs-callout bs-callout-warning">
You cannot use the graphic Model editor to do it. You must use the SSJS Model API.
For more information please visit the <a target="_blank" href="/api-reference/"> API Reference </a>
</div>

<br>
<br>
<h3> Code your controlMethods</h3>

<br> 
On the <code> controller.js</code> file you need to declare and code all the <code>controlMethods</code>. 
<br>This is the prerequisite before being able to use the the Wakanda API. 

The controlMethods you have to implement are listed below:
<br>
<br>
 
<strong>READ OPERATIONS</strong>
<ul>
<li>getEntityByGey</li>
<li>getEntityByPos</li>
<li>allEntities</li>
<li>getAttributeValue</li>
<li>loadEntity</li>
</ul>
 <br>
 
<strong>CREATE/SAVE OPERATIONS </strong>

<ul>
<li>newEntity</li>
<li>setAttributeValue</li>
<li>saveEntity</li>
<li>refreshEntity</li>
</ul>
<br>


<strong>DROP OPERATIONS</strong>
<ul> 
 <li>dropEntity</li>
 <li>dropEntities</li> 
</ul> 
<br>
 
 <strong>QUERY</strong>

<ul>
 <li>searchByString</li>
 <li> searchByCriteria</li>
</ul>
<br>
 
 <strong>Relationship Management</strong>
<ul>
 <li>getRelatedKey</li>
 <li>getRelatedEntity</li>
 <li>getRelatedEntities</li>   
</ul> 
 <br>
  
<strong>Collections Operations</strong>
<ul>
 <li>newCollection</li>
 <li>addEntityToCollection</li>
 <li>getCollectionLength</li>
 <li>countEntities</li>
 <li>orderBy</li>
 <li>compute</li>
 <li>collectionToArray</li>
 <li>nextInCollection</li>
</ul> 
<br>
 
 <strong>Others</strong>
<ul>
 <li>getStamp</li> 
</ul>
 <br>
 
 <div class="bs-callout bs-callout-info">
For more details and examples please visit <a href="/api-reference/"  target="_blank">the Virtual API reference section</a>
</div>
<br>
 
 
 <snippets path="./assets/snippets/data/external-data/" files="['controlMethods.js']"></snippets>
  


<br> 
<h2> Feature Status </h2>
<br>
<p>
We designed the Virtual Connector Pro to fully support all Wakanda model features, allowing your applications to work with external services as if they were mere local built-in database .
<br>As a result, in the current release the main Wakanda features are supported, including queries, collections, entity handling, and much more.
However, some features are not yet implemented. 
<br>They are listed in the following paragraph.
<p>
<br>
<h3> Non Supported features </h3>
<br>
Currently, the Virtual Connector does not support the following Wakanda model features:
<ul>
    <li>Aliases </li>
    <li>Restricting queries </li>
    <li>Extended and derived datastore classes </li>
    <li>Relations beyond 2nde level</li>
    <li>Recursive Relations</li>
    <li>Operations on created collections</li>
    <li>Blob type support (Currently in Development)</li>
    <li>Transactions</li>
</ul>
<br>
<br>


<h3> Non Supported API </h3>
<br>
Comparing to the Wakanda built-in database there are few API missing when working with Virtual Pro Connector.

<br>
<div id="virtual-api" class="collapse">
    <table class="table table-bordered table-hover">
    	<thead>
    		<tr>
    			<th>DataStore</th>
    			<th>DataClass</th>
    			<th>Entity Collection</th>
    			<th>Entity</th>
    		</tr>
    	</thead>
    	<tbody>
	        <tr>
	            <td>exportAsJSON()</td>
	            <td>exportAsJSON()</td>
	            <td>exportAsJSON()</td>
	            <td>getStamp()</td>
	        </tr>
	        <tr>
	            <td>exportAsSQL()</td>
	            <td>exportAsSQL()</td>
	            <td>exportAsSQL()</td>
	            <td>getTimeStamp()</td>
	        </tr>
	        <tr>
	        	<td>flushCache()</td>
	        	<td>getFragmentation()</td>
	        	<td>queryPath()</td>
	        	<td>lock()</td>
	        </tr>
	        <tr>
	        	<td>getName()</td>
	        	<td>getScope()</td>
	        	<td>and()</td>
	        	<td>unlock()</td>
	        </tr>
	        <tr>
	        	<td>importFromJSON()</td>
	        	<td>importFromJSON()</td>
	        	<td>minus()</td>
	        	<td></td>
	        </tr>
	       <tr>
	       		<td>revealGhostTables()</td>
	       		<td>setAutoSequenceNumber()</td>
	       		<td>or()</td>
	       		<td></td>
	       </tr>
	    </tbody>   
	</table>
</div>

<style>
	/* Table CSS style*/
	.table { border-collapse: collapse; text-align: left; width: 100%; }
	.table { background: #fff; overflow: hidden; border: 1px solid #DBDBDB; border-radius: 3px; }
	.table td, .table th { padding: 3px 10px; }
	.table thead th {background-color:#DBDBDB; font-size: 15px; font-weight: bold; border-left: 1px solid #B0B0B0; }
	.table tbody td { border-left: 1px solid #B0B0B0;font-size: 12px;font-weight: normal; }
	.table tbody tr:nth-child(even) { background: #f3f3f3;}
</style>

