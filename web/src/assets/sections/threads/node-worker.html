<h1>Node Worker</h1>

<h2>What is it</h2>
<p>
    <ul>
        <li>A Node Worker runs some code in a separate thread.</li>
        <li>You can communicate with a NodeWorker from anywhere in your application.</li>
        <li>You can use <strong>NodeJS</strong> APIs and modules inside a Node Worker.</li>
    </ul>

<div class="bs-callout bs-callout-danger">
	<ul>
		<li>
			You can use the <code>NodeWorker</code> API in Wakanda Server without installing NodeJS on your machine.
		</li>
		<li>
			If you need to install NodeJS packages using NPM or Yarn you'll need to install NodeJS 6 LTS, otherwise you might install packages that are not compatible with the <code>NodeWorker</code> API.
		</li>
	</ul>   
</div>

<h2>How to</h2>
<p>
    To use the <code>NodeWorker</code> API you need the following :
    <ul>
        <li>A JavaScript file that contains the code to be run.</li>
        <li>An ID to identify the NodeWorker instance.</li>
    </ul>
<h3>How to use NodeJS Code</h3>
    <ul>
        <li>You can use any globally exposed NodeJS APIs and objects (<code>process</code> for instance).</li>
        <li>
            You can require any native NodeJS module using `requireNode`
            <markdown-to-html>
                ```javascript
                    var fs = requireNode("fs");
                ```
            </markdown-to-html>
        </li>
        <li>
            To use a NodeJS module from <code>npm</code> you need to do the following :
            <ul>
                <li>
                    Right click on your <code>backend</code> project in the solution explorer
                    and select <code>Open in Terminal</code>
                    <p>
                    <img src="./assets/images/open-backend-in-terminal.png" alt="Open Backend folder in terminal" class="img-responsive">
                </li>
                <li>
                    Type: <code>npm install [YOUR_NODEJS_MODULE_NAME]</code> and submit. Example :
                    <markdown-to-html>
                        ```bash
                        npm install mongodb
                        ```
                    </markdown-to-html>
                    <div class="bs-callout bs-callout-info">
                        If you have a <code>package.json</code> file and you want to save the package as a production dependency add <code>--save</code> to your command.
                    </div>
                </li>
                <li>
                    You can require your installed module using `requireNode`. Example :
                    <markdown-to-html>
                        ```javascript
                            var mongodb = requireNode("mongodb");
                        ```
                    </markdown-to-html>
                </li>
            </ul>
        </li>
    </ul>
    
<div class="bs-callout bs-callout-danger">
    You only need to use <code>requireNode</code> for first level NodeJS dependencies, inside 
    a NodeJS module <code>require</code> is <code>NodeJS</code>'s <code>require</code>.
</div>
    
Here is an example demonstrating the usage of a NodeJS native module :
    
<snippets path="./assets/snippets/threads/node-worker/" files="['test.js', 'worker.js']"></snippets>

<div class="bs-callout bs-callout-info">
    For a more advanced example you can visit <a target="_blank" href="https://github.com/JegoYann/wakex-node-worker">this Github repository</a>.
</div>