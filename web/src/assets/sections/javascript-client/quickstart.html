<h1>Quickstart</h1>This quickstart aims to present all the main features of Wakanda Client, and how they works.The API is very close to the Angular-Wakanda one, so if you already know it, you will be on a known field.<p>All asynchronous methods return a promise, so you'll have to be familiar with it to use Wakanda Client.<h2>Instantiating client</h2>On a browser or on node, Wakanda Client is used the same. The only thing that differs is the way you include it on your projet. As it's exposed as a UMD module, you're free to use a various panel of module loader, or even this good old global variable on browser to use it.<p>On node for example<snippets path="./assets/snippets/javascript-client/quickstart/" files="['define-node.js']"></snippets><p>On a browser<snippets path="./assets/snippets/javascript-client/quickstart/" files="['define-web.js']"></snippets><p>Then, simply instantiate it. You have to pass an URI to indicate where is your Wakanda Server. On browser, you can omit this parameter, then all requests will be done on <code>/rest/...</code> address, so it's on you to proxy it to your Wakanda Server.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['instantiate.js']"></snippets><h3>ES6/TypeScript</h3>You can also import exposed classes with <code>import</code> command.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['import.js']"></snippets><strong>On next examples, <code>wakanda</code> variable will designate an instance of <code>WakandaClient</code>.</strong><h2>Getting a catalog</h2>Before working with dataClasses, you will need to retrieve it. A set of dataClasses is called a Catalog.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['get-all-catalogs.js']"></snippets><p>If you want only specific dataClasses, pass an array with dataClasses name to <code>getCatalog</code><snippets path="./assets/snippets/javascript-client/quickstart/" files="['get-one-catalog.js']"></snippets><strong>On next examples <code>ds</code> will designate a fully retrieved catalog.</strong><h2>Retrieving entities</h2><h3>Find</h3>To find an entity with its key, use <code>find</code> method on a dataClass.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['find.js']"></snippets><h3>Query</h3>You can also find several entities (a collection) with <code>query</code> method. It takes an optional object as parameter to describe your query (order, expanding, filter, etc).<snippets path="./assets/snippets/javascript-client/quickstart/" files="['query.js']"></snippets><p>There are some utility methods on collections (especially for paging), it will be described on the next parts.<h2>Manipulating an entity</h2><h3>Saving</h3><code>save()</code> method on an entity will create or update it. If there is some server-side processing on the entity, it will be updated when the promise resolves.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['save.js']"></snippets><h3>Creating</h3>To create an entity, call <code>create()</code> on the right dataClass, affect values for its properties then save it.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['create.js']"></snippets><p>You can also pass an object as parameter to affect properties at the same time.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['create-with-param.js']"></snippets><h3>Delete</h3>To delete an entity, call <code>delete()</code> on it.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['delete.js']"></snippets><h2>Related entities</h2>Wakanda allows us to manipulate seamlessly related entities. We can affect, retrieve and access related entities with no pain.<h3>Expanding</h3>On a find or a query, we can use <code>expand</code> option to eagerly retrieve a related entity or a collection.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['expanding.js']"></snippets><h3>Fetching</h3>To access a related entity or collection that have not been expanded, you can to fetch it with <code>fetch()</code> method. Before being fetched (or expanded), it's considered as *deferred*.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['fetching.js']"></snippets><h3>Affecting</h3>We can affect a related entity as any other scalar type, with an affectation.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['affecting.js']"></snippets><h2>Image/Blob upload</h2><h3>Upload</h3>Image and files (blob) can be affected to an entity thanks to <code>upload()</code> method. This method is present on every attributes of type <code>image</code> or <code>blob</code>. <strong><code>upload()</code> method can only be called on an already saved entity</strong>, you can't call it just after a <code>create()</code>, because the entity has to exist on the server-side.<p>Considering the following HTML file:<snippets path="./assets/snippets/javascript-client/quickstart/" files="['upload.html']"></snippets><snippets path="./assets/snippets/javascript-client/quickstart/" files="['upload-js.js']"></snippets><h3>Retrieve existing file</h3><code>image</code> and <code>blob</code> attributes are represented by an object, with the <code>upload()</code> method, and a <code>uri</code> property. This property carries the actual URI of the file, if there is one.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['retrieve-file.js']"></snippets><h3>Remove the current file</h3>To delete the current file affected to a <code>image</code> or <code>blob</code> attribute, you can call the <code>delete()</code> method on the property.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['delete-file.js']"></snippets><h2>Collection helpers</h2>There are several helpers on collection to make paging or infinite loading an easy task:<ul>	<li>		<code>nextPage()</code>: get the next page of the collection	</li>	<li>		<code>prevPage()</code>: get the previous page of the collection	</li>	<li>		<code>more()</code>: load a new page and append it to the current collection	</li></ul><p>Difference between <code>more</code> and <code>nextPage</code> is that more will <strong>add</strong> the retrieved entities to the current <code>entities</code> array, where <code>nextPage</code> will <strong>replace</strong> the actual entities with the retrieved ones.<p>All three methods return a promise and change the collection they are called on.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['collection-helpers.js']"></snippets><p>Obviously, mixing <code>nextPage</code> and <code>more</code> will not result on something funny, you don't want to do that.<h2>Server methods</h2>On Wakanda, you can define methods on the model designer. It can be attached on DataClass, Entity or Collection.<p>You can directly call theses methods on the object you manipulate with Wakanda Client (excepting collection methods, that will be implemented soon).<snippets path="./assets/snippets/javascript-client/quickstart/" files="['server-methods.js']"></snippets><p>If the method defined on the server returns an entity or a collection, Wakanda Client will automatically consider the returned value as an entity or a collection.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['server-methods2.js']"></snippets><h2>Directory methods</h2>Wakanda-Clients allows you to use directory methods to authenticate.All those methods are accessible with the <code>directory</code> property of a <code>WakandaClient</code> instance.<p>To log in, use <code>login()</code> method.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['login.js']"></snippets><p>You can set a duration in seconds as third parameter.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['login-session-lifetime.js']"></snippets><p>To logout, simply use <code>logout()</code> method.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['logout.js']"></snippets><p>To get the current user, use <code>currentUser()</code> method.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['current-user.js']"></snippets><p>To check if the current user belongs to a specific group, use <code>currentUserBelongsTo()</code> method.<snippets path="./assets/snippets/javascript-client/quickstart/" files="['current-user-belongs-to.js']"></snippets>